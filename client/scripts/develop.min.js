/* Datei für public launch unter scripts.min.js sichern und dann z.B. mit http://refresh-sf.com/yui/ komprimieren */


$(document).ready(function(){


/* jQuery Cookie*/	


(function(factory){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],factory);}else{factory(jQuery);}}(function($){var pluses=/\+/g;function raw(s){return s;}function decoded(s){return decodeURIComponent(s.replace(pluses," "));}function converted(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");}try{return config.json?JSON.parse(s):s;}catch(er){}}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""));}var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");var result=key?undefined:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");var name=decode(parts.shift());var cookie=decode(parts.join("="));if(key&&key===name){result=converted(cookie);break;}if(!key){result[name]=converted(cookie);}}return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,"",$.extend(options,{expires:-1}));return true;}return false;};}));




var $body = $('body');

// Mobil- und Desktop-Browser erkennen

var typeofBrowser = $.cookie('browser');

if (typeof typeofBrowser === "undefined") {

	var ua1 = (/android|mobile|ip(hone|od|ad)|blackberry|bada\/|symbian|nokia|windows ce|tablet|phone|opera m(ob|in)i|ucweb/).test(navigator.userAgent.toLowerCase());
	
	var ua2 = (/avantgo|blazer|compal|elaine|fennec|hiptop|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|palm( os)?|p(ixi|re)\/|plucker|pocket|psp|treo|up\.(browser|link)|vodafone|wap|xda|xiino|1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/).test(navigator.userAgent.toLowerCase());
	
	
	if ((typeof window.onorientationchange !== 'undefined')) {
		typeofBrowser = "mobi";
	}
	else if (screen.width<=920) {
		typeofBrowser = "mobi";
	}
	else if (ua1 == true) {
		typeofBrowser = "mobi";
	}
	else if (ua2 == true) {
		typeofBrowser = "mobi";
	}
	else  {
		typeofBrowser = "desk";
	}
	
	$body.addClass(typeofBrowser);
	$.cookie('browser', typeofBrowser, { expires: 365 });
	
}


// class mobi bzw. desk an body schreiben

else {
	$body.addClass(typeofBrowser);
	
}


	

/* http://x1024.github.com/jquery-fastbutton/ 
(function(){var Clickbuster,FastButton,clickDistance,clickbusterDistance,clickbusterTimeout,debug,eventHandler;clickbusterDistance=25;clickbusterTimeout=2500;clickDistance=10;if(window.debug==null){debug=function(arg){return console.log(arg);};}FastButton=(function(){function FastButton(selector,handler){var handlers,that;this.selector=selector;this.handler=handler;if(!("ontouchstart" in window)){return;}this.active=false;that=this;handlers={touchstart:function(event){return that.touchStart(event,this);},touchend:function(event){return that.touchEnd(event,this);}};$(document).on(handlers,selector).on("touchmove",function(){return that.touchMove(event);});}FastButton.prototype.touchStart=function(event,element){var touch;touch=event.originalEvent.touches[0];this.active=true;this.startX=touch.clientX;this.startY=touch.clientY;return event.stopPropagation();};FastButton.prototype.touchMove=function(event){var dx,dy,touch;if(!this.active){return;}touch=event.originalEvent.touches[0];dx=Math.abs(touch.clientX-this.startX);dy=Math.abs(touch.clientY-this.startY);if(dx>clickDistance||dy>clickDistance){return this.active=false;}};FastButton.prototype.touchEnd=function(event,element){if(!this.active){return;}event.preventDefault();this.active=false;Clickbuster.preventGhostClick(this.startX,this.startY);return this.handler.call(element,event);};return FastButton;})();Clickbuster=(function(){function Clickbuster(){}Clickbuster.coordinates=[];Clickbuster.preventGhostClick=function(x,y){Clickbuster.coordinates.push(x,y);return window.setTimeout(Clickbuster.pop,clickbusterTimeout);};Clickbuster.pop=function(){return Clickbuster.coordinates.splice(0,2);};Clickbuster.onClick=function(event){var coordinates,dx,dy,i,x,y;coordinates=Clickbuster.coordinates;i=0;if(event.clientX==null){return true;}window.ev=event;while(i<coordinates.length){x=coordinates[i];y=coordinates[i+1];dx=Math.abs(event.clientX-x);dy=Math.abs(event.clientY-y);i+=2;if(dx<clickbusterDistance&&dy<clickbusterDistance){return false;}}return true;};return Clickbuster;})();eventHandler=function(handleObj){var origHandler;origHandler=handleObj.handler;return handleObj.handler=function(event){if(!Clickbuster.onClick(event)){return false;}return origHandler.apply(this,arguments);};};$.event.special.click={add:eventHandler};$.event.special.submit={add:eventHandler};$.fn.extend({fastButton:function(handler){return $.fastButton(this.selector,handler);}});$.extend({fastButton:function(selector,handler){return new FastButton(selector,handler);}});$.fastButton(".use-fastclick a[data-remote],   .use-fastclick .fastClick",function(ev){$(this).trigger("click");return false;});$.fastButton(".use-fastclick a:not([data-remote]):not(.fastClick)",function(ev){var $this,href,target;$this=$(this);target=$this.attr("target");href=$this.attr("href");if(target===void 0){window.location=href;}else{window.open(href,target);}return false;});$.fastButton('.use-fastclick .submit,   .use-fastclick input[type="submit"],   .use-fastclick button[type="submit"]',function(ev){$(this).closest("form").trigger("click");return false;});$.fastButton('.use-fastclick input[type="text"]',function(ev){ev.preventDefault();$(this).trigger("focus");return false;});}).call(this);

*/
	

// Touch statt Click auf Mobilgeräten

var touchclick = "click"; 
if (typeof document.body.ontouchstart !== "undefined") { 
       touchclick = "touchstart"; 
 }



// Navi ein- und ausblenden


$navi = $('#n1');
$button = $('#menutoggle');
$buttontext = $button.find('span');
$buttonlabel = 'Navigation';
$buttontext.html($buttonlabel + ' einblenden');
$button.on('click',function(){
	$this = $(this);
	$this.toggleClass('aktiv');
 	$navi.toggleClass('offen').toggle();
	 	if ($this.attr('class') == 'aktiv') {
	 		$this.removeAttr('tabindex');
	 	  	$buttontext.html($buttonlabel + ' ausblenden');
	 	}
	 	else {
	 	  	$this.attr('tabindex','-1').focus();
	 	  	$buttontext.html($buttonlabel + ' einblenden');
	 	}
	 	if ($navi.attr('class') == 'offen') {
	  		$navi.attr('tabindex','-1').focus();
	  	}
		else { 
	  		$navi.removeAttr('tabindex');
	  	}
});

/*

// für sekundäre Navi

if (typeofBrowser == 'mobi') {

	var $subbutton = $navi.find('.submenu');
	$subbutton.on(touchclick,function(){
		$this = $(this);
		$this.toggleClass("auf").next("ul").toggle();
		//$subbutton.not($this).removeClass("auf").next("ul").hide();
	});	

}

if (typeofBrowser == 'desk') {

	var $level2 = $navi.find('.l2');
	$level2.parent().on('focusin, mouseenter',function(){
		$level2.hide();
		$this = $(this);
		$this.find('.l2').fadeIn();
	//	$(this).find('.l2').show().on('focusout, mouseleave',function(){	
	//		$(this).fadeOut();
	//	});
		
		$this.on('focusout, mouseleave',function(){	
			$this.find($level2).fadeOut();
		});
	});

}

*/



/* lädt und entfernt Elemente in Abhüngigkeit von der Seitenbreite

$menu2 = $('#map');
if (($('#rahmen').width() >= 960) && (typeofBrowser = "desk")) {
	$menu2.load('menu2.html');
	}
else {
	$('#n2').remove();
	$('#fusz').hide();
}
*/
}); //ENDE VON $(document).ready(function()



/* https://github.com/scottjehl/Hide-Address-Bar/blob/master/hide-address-bar.js */
(function( win ){
	var doc = win.document;

	// If there's a hash, or addEventListener is undefined, stop here
	if( !location.hash && win.addEventListener ){

		//scroll to 1
		win.scrollTo( 0, 1 );
		var scrollTop = 1,
			getScrollTop = function(){
				return win.pageYOffset || doc.compatMode === "CSS1Compat" && doc.documentElement.scrollTop || doc.body.scrollTop || 0;
			},

			//reset to 0 on bodyready, if needed
			bodycheck = setInterval(function(){
				if( doc.body ){
					clearInterval( bodycheck );
					scrollTop = getScrollTop();
					win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
				}	
			}, 15 );

		win.addEventListener( "load", function(){
			setTimeout(function(){
				//at load, if user hasn't scrolled more than 20 or so...
				if( getScrollTop() < 20 ){
					//reset to hide addr bar at onload
					win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
				}
			}, 0);
		}, false );
	}
})( this );



/* https://github.com/scottjehl/iOS-Orientationchange-Fix und https://github.com/scottjehl/iOS-Orientationchange-Fix/pull/23 */
(function (w) {

    // This fix addresses an iOS bug, so return early if the UA claims it's something else.
    if( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test(ua) && ua.indexOf( "AppleWebKit" ) > -1  && ua.indexOf( "CriOS") == -1 ) ){ 
          return; 
   }

    var doc = w.document;

    if (!doc.querySelector) {
        return;
    }

    var meta = doc.querySelector("meta[name=viewport]"),
        initialContent = meta && meta.getAttribute("content"),
        disabledZoom = initialContent + ",maximum-scale=1",
        enabledZoom = initialContent + ",maximum-scale=10",
        enabled = true,
        x, y, z, aig;

    if (!meta) {
        return;
    }

    function restoreZoom() {
        meta.setAttribute("content", enabledZoom);
        enabled = true;
    }

    function disableZoom() {
        meta.setAttribute("content", disabledZoom);
        enabled = false;
    }

    function checkTilt(e) {
        aig = e.accelerationIncludingGravity;
        x = Math.abs(aig.x);
        y = Math.abs(aig.y);
        
        // If portrait orientation and in one of the danger zones
       	var s = x/y;
              // If in the danger zone where x is much greater than y turn off zoom
		if(s > 1.2){
		  if(enabled){
		  	disableZoom();
		  }
		}else if( !enabled ){
			restoreZoom();
		}
    }

    w.addEventListener("orientationchange", restoreZoom, false);
    w.addEventListener("devicemotion", checkTilt, false);

})(this);